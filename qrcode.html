<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QR Codes</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator/qrcode.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
      }
      #qrcodes {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }
      .qr-wrapper {
        border: 1px solid #ccc;
        border-radius: 10px;
        padding: 10px;
        margin: 10px;
        width: 160px;
        text-align: center;
      }
      .qr-wrapper p {
        font-weight: bold;
        margin-bottom: 8px;
      }
      .download-btn {
        display: inline-block;
        margin-top: 8px;
        padding: 6px 10px;
        background: #007bff;
        color: #fff;
        border-radius: 4px;
        text-decoration: none;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <div id="qrcodes"></div>

    <script>
      $(document).ready(function () {
        const qrContainer = document.getElementById("qrcodes");

        // Generate codes (example range)
        for (let i = 2510100; i <= 2510100; i++) {
          const codeText = `Q${16202366}`;

          // Define the URL you want the QR code to link to
          const qrURL = `https://lembedecollege.online/verify?code=${codeText}`;
         

          const qr = qrcode(0, "L"); // Version auto, Low error correction
          qr.addData(qrURL); // Changed from codeText to qrURL
          qr.make();

          const qrWrapper = document.createElement("div");
          qrWrapper.className = "qr-wrapper";

          const label = document.createElement("p");
          label.textContent = codeText;
          qrWrapper.appendChild(label);

          // Insert the generated <img> from the library
          const imgHtml = qr.createImgTag(4);
          qrWrapper.insertAdjacentHTML("beforeend", imgHtml);

          // Grab the image element to read its data URL
          const img = qrWrapper.querySelector("img");
          if (img) {
            // Create download link using the image data URL and give it a filename
            const dl = document.createElement("a");
            dl.href = img.src;
            dl.download = `${codeText}.png`; // filename
            dl.className = "download-btn";
            dl.textContent = "Download";
            qrWrapper.appendChild(dl);
          }

          qrContainer.appendChild(qrWrapper);
        }
      });
    </script>
  </body>
</html>
